# План-факт по разработке GraphExtractor

## Исходный план

### Цель проекта
Разработать минисервис для обнаружения, распознавания и извлечения графовых структур из изображений.

### Запланированные компоненты
1. Модуль детектирования объектов графа (узлы, ребра)
2. Построитель графов из обнаруженных элементов
3. API-интерфейс для взаимодействия с сервисом
4. Утилита командной строки для обработки изображений
5. Документация и примеры использования

## Реализовано

1. **Базовая архитектура проекта**:
   - Структура каталогов и модулей
   - Файл настройки установки (setup.py)
   - Основная документация (README.md)

2. **Модуль детектирования**:
   - `GraphDetector` - основной класс для обнаружения графовых структур
   - `NodeDetector` - специализированный детектор для узлов графа (частично работает)
   - `EdgeDetector` - специализированный детектор для ребер графа (требует доработки)

3. **Построитель графов**:
   - `NetworkXBuilder` - конвертация результатов распознавания в объекты NetworkX
   - Методы сохранения в различных форматах (GEXF, GraphML, GML)
   - Базовая визуализация распознанных графов

4. **REST API (FastAPI)**:
   - Базовая структура реализована
   - Требуется исправление для стабильной работы (в настоящее время API не запускается корректно)

5. **Интерфейс командной строки**:
   - Базовая структура для обработки отдельных изображений
   - Пакетная обработка директорий с ограничениями функциональности

## Не реализовано

1. **Улучшенные алгоритмы распознавания**:
   - Более точное обнаружение узлов с учетом различных форм (не только круглых)
   - Точное распознавание ребер, особенно изогнутых линий и стрелок
   - Распознавание меток узлов и ребер (OCR для текста)

2. **Обработка сложных графов**:
   - Работа с иерархическими графами
   - Корректное распознавание пересекающихся ребер
   - Обработка разноцветных или стилизованных элементов графа

3. **Дополнительные функции**:
   - Распознавание направленных графов
   - Обнаружение атрибутов узлов и ребер
   - Интерактивное редактирование распознанных графов
   - Интеграция с базами данных для хранения результатов

4. **Оптимизация производительности**:
   - Оптимизация обработки больших изображений
   - Параллельная обработка для ускорения
   - Кэширование промежуточных результатов

5. **Тестирование**:
   - Модульные тесты
   - Интеграционные тесты
   - Тестирование производительности

## Возможные направления развития

1. **Машинное обучение**:
   - Интеграция нейронных сетей для улучшения распознавания (SegNet, U-Net)
   - Использование предобученных моделей компьютерного зрения
   - Обучение на специализированных данных графических схем

2. **Расширение типов распознаваемых графов**:
   - Поддержка электрических схем
   - Распознавание блок-схем алгоритмов
   - Обработка UML-диаграмм

3. **Пользовательский интерфейс**:
   - Веб-интерфейс для загрузки и обработки изображений
   - Интерактивное редактирование результатов распознавания
   - Отображение и экспорт в различных форматах

4. **Интеграция с другими системами**:
   - Экспорт в форматы популярных систем управления графами
   - Интеграция с системами автоматизированного проектирования
   - Разработка плагинов для существующих инструментов

## Ограничения текущей реализации

1. **Фундаментальные проблемы**:
   - Имеется критическая ошибка "cannot unpack non-iterable int object" при обработке изображений
   - REST API не запускается корректно
   - Обработка графов завершается с ошибками для всех тестовых изображений

2. **Алгоритмические ограничения**:
   - Базовые алгоритмы компьютерного зрения имеют ограничения в точности распознавания
   - Наивный подход к определению связей между узлами
   - Отсутствует распознавание текста и меток на узлах и ребрах графа
   
3. **Производительность и функциональность**:
   - Возможны ошибки при работе со сложными или низкокачественными изображениями
   - Отсутствует кэширование промежуточных результатов
   - Тестирование выявило проблемы со стабильностью работы основных компонентов
